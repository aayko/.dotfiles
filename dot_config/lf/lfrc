set previewer ~/.config/lf/preview
set sixel true

# Settings
set ratios 1:1
set info size:time

set hidden      true
set ignorecase  true
set icons       true
set scrolloff   8
set tabstop     4

cmd unarchive ${{
    case "$f" in
        *.zip) unzip "$f" ;;
        *.tar.gz) tar -xzvf "$f" ;;
        *.tar.bz2) tar -xjvf "$f" ;;
        *.tar) tar -xvf "$f" ;;
        *.rar) unrar -x "$f" ;;
        *.7z) 7z -x "$f";;
        *) echo "Unsupported format" ;;
        esac

}}

cmd unarchive-delete ${{
    case "$f" in
        *.zip) unzip "$f" && trash "$f" ;;
        *.tar.gz) tar -xzvf "$f" && trash "$f" ;;
        *.tar.bz2) tar -xjvf "$f" && trash "$f" ;;
        *.tar) tar -xvf "$f" && trash "$f" ;;
        *.rar) unrar -x "$f" && trash "$f" ;;
        *.7z) 7z -x "$f" && trash "$f" ;;
        *) echo "Unsupported format" ;;
        esac
}}

cmd trash ${{
    files=$(printf "$fx" | tr '\n' ';')
    while [ "$files" ]; do
        file=${files%%;*}

        trash-put "$(basename "$file")"
        if [ "$files" = "$file" ]; then
            files=''
        else
            files="${files#*;}"
        fi
    done
}}

cmd restore_trash ${{
    trash-restore
}}

cmd zip push :$zip<space>-r
cmd tar push :$tar<space>cvf<space>.tar<left><left><left><left>

# Bindings
clearmaps

map q quit
map f find

map F find-back
map ; find-next
map , find-prev
map / search
map ? search-back
map n search-next
map N search-prev

map . set hidden!
map ` !true
map r rename
map t toggle
map <space> :toggle; down
map v invert
map u unselect
map y copy
map p paste
map R :source /home/ayko/.config/lf/lfrc; reload
map C clear
map x cut
map \$ push :$

map j down
map k up
map h updir
map l open
map <c-u> half-up
map <c-d> half-down
map ] jump-next
map [ jump-prev
map gg top
map G bottom
map ms mark-save
map "'" mark-load
map '"' mark-remove

map se $sudoedit "$f"
map e $$EDITOR "$f"
map c $codium --enable-features=UseOzonePlatform,WaylandWindowDecorations --ozone-platform=wayland "$f"

map au unarchive
map ad unarchive-delete
map zz zip
map zt tar

map dd trash
map dr restore_trash

map P ${{
    wl-copy "$f"
    lf -remote 'send echo "File path copied to clipboard"'
}}

map <enter> &mimeo "$f"
map o $mimeopen --ask "$f"
map md push :%mkdir<space>
map mf push :%touch<space>
map me push :&foot<space>nvim<space>

map = ${{
    [[ -x "$f" ]] && chmod -x "$f" || chmod +x "$f"
    lf -remote 'send reload'
}}

map w ${{
    sudo chown -R $(whoami) "$f"
    lf -remote 'send reload'
}}

# movement
map g/ cd /
map gh cd /home/ayko/

map gc cd /home/ayko/.config
map gd cd /home/ayko/Documents
map gD cd /home/ayko/Downloads
map gr cd /home/ayko/Repos
map gu cd /home/ayko/Uni
map gw cd /home/ayko/Web
map gm cd /run/media/ayko
map gp cd /home/ayko/Pictures
map gv cd /home/ayko/Pictures/videos
map gl cd /home/ayko/.local
map gb cd /home/ayko/.local/bin
map gf cd /home/ayko/.mozilla/firefox/profile.ayko/chrome
map gs cd /home/ayko/Sync
map gt cd /home/ayko/.local/share/Trash/files
