{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash

install_packages() {
  for package in "${@}"; do
    yay -S --needed --noconfirm --sudoloop "${package}"
  done
}

bluetooth_packages={{ range .packages.linux.bluetooth -}}{{ . | quote }} {{ end }}
basic_packages={{ range .packages.linux.basic -}}{{ . | quote }} {{ end }}
font_packages={{ range .packages.linux.fonts -}}{{ . | quote }} {{ end }}
audio_packages={{ range .packages.linux.audio -}}{{ . | quote }} {{ end }}
sddm_packages={{ range .packages.linux.sddm -}}{{ . | quote }} {{ end }}
gui_packages={{ range .packages.linux.gui -}}{{ . | quote }} {{ end }}
wayland_packages={{ range .packages.linux.wayland -}}{{ . | quote }} {{ end }}
x11_packages={{ range .packages.linux.x11 -}}{{ . | quote }} {{ end }}
development_packages={{ range .packages.linux.development -}}{{ . | quote }} {{ end }}

install_packages ${bluetooth_packages}
install_packages ${basic_packages}
install_packages ${font_packages}
install_packages ${audio_packages}
install_packages ${sddm_packages}
install_packages ${gui_packages}
install_packages ${development_packages}

{{ if eq .displayServer "x11" }}
  install_packages ${x11_packages}
{{ else }}
  install_packages ${wayland_packages}
{{ end }}

{{ end -}}
